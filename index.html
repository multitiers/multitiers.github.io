<!DOCTYPE html>
<html lang="en" translate="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTC TIERS</title>
<link rel="icon" type="image/png" href="backgroundsword.png">
<style>
@font-face { font-family:'MultiCraftFont'; src:url('MultiCraftFont.ttf') format('truetype'); }
:root{
--bg:#000;--purple:#a855f7;--gold:#ffd700;--silver:#c0c0c0;--bronze:#cd7f32;
--red:#e74c3c;--blue:#3498db;--yellow:#f1c40f;--green:#2ecc71;--cyan:#00ffff;
--sa:#00ff88;--as:#ff9900;--oc:#ff33cc;--unknown:#888888;
}
*{font-family:'MultiCraftFont';margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:#eee;min-height:100vh;overflow-x:hidden;}
nav{display:flex;justify-content:center;gap:40px;padding:20px;background:rgba(0,0,0,0.9);border-bottom:1px solid #222;position:sticky;top:0;z-index:500;}
.nav-link{opacity:0.7;cursor:pointer;transition:0.3s;}
.nav-link.active{opacity:1;text-shadow:0 0 10px var(--purple);}
header{text-align:center;padding:40px 0 20px;}
.main-title{font-size:3rem;letter-spacing:6px;text-shadow:0 0 15px var(--purple);}
#kitBar{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;margin:20px 0;}
.kit-btn{background:#111;border:1px solid #333;padding:8px 16px;border-radius:6px;cursor:pointer;color:#eee;transition:0.2s;}
.kit-btn.active{border-color:var(--purple);box-shadow:0 0 12px rgba(168,85,247,0.4);}
.overall-table{display:flex;flex-direction:column;width:95%;margin:0 auto;}
.overall-row{display:flex;justify-content:flex-start;align-items:center;padding:6px 12px;border-bottom:1px solid #222;transition:0.2s;cursor:pointer;}
.overall-row:hover{background:rgba(255,255,255,0.05);}
.overall-rank{width:40px;text-align:center;font-weight:bold;}
.overall-name{flex:1;min-width:120px;padding-left:10px;color:#fff;}
.overall-kit-icon{width:30px;height:30px;margin-right:8px;}
.overall-tier{width:35px;height:35px;border:2px solid #fff;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:8px;font-size:0.8rem;color:#fff;transition:0.2s;cursor:pointer;}
.overall-tier:hover{background:rgba(168,85,247,0.2);}
.rank-1 .overall-rank,.rank-1 .overall-tier{box-shadow:0 0 20px var(--gold);animation:shine 2s infinite alternate;}
.rank-2 .overall-rank,.rank-2 .overall-tier{box-shadow:0 0 20px var(--silver);animation:shine 2s infinite alternate;}
.rank-3 .overall-rank,.rank-3 .overall-tier{box-shadow:0 0 20px var(--bronze);animation:shine 2s infinite alternate;}
@keyframes shine{0%{box-shadow:0 0 10px currentColor;}50%{box-shadow:0 0 25px currentColor;}100%{box-shadow:0 0 10px currentColor;}}
.tag{font-size:0.6rem;padding:2px 6px;border:1px solid #444;border-radius:4px;margin-left:6px;opacity:0.9;cursor:pointer;}
.reg-na{color:var(--red);border-color:var(--red);}
.reg-eu{color:var(--blue);border-color:var(--blue);}
.reg-sa{color:var(--sa);border-color:var(--sa);}
.reg-as{color:var(--as);border-color:var(--as);}
.reg-oc{color:var(--oc);border-color:var(--oc);}
.reg-unknown{color:var(--unknown);border-color:var(--unknown);}
.dev-mk{color:var(--cyan);border-color:var(--cyan);}
.dev-mb{color:var(--green);border-color:var(--green);}
.dev-tp{color:#fff;border-color:#fff;}
.dev-ct{color:var(--yellow);border-color:var(--yellow);}
.dev-unknown{color:var(--unknown);border-color:var(--unknown);}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;}
.modal-content{background:#000;border:1.5px solid var(--purple);padding:30px;border-radius:12px;width:400px;text-align:center;color:#eee;}
.tiers-container{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin-top:15px;}
.tier-circle{width:50px;height:50px;border:2px solid var(--purple);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:0.2s;font-size:0.8rem;color:#fff;}
.tier-circle:hover{background:rgba(168,85,247,0.2);transform:scale(1.1);}
</style>
</head>
<body>
<nav>
<div id="nav-rankings" class="nav-link active">RANKINGS</div>
</nav>
<header><h1 class="main-title">MTC TIERS</h1></header>
<div id="kitBar"></div>
<div id="displayList"></div>
<div id="profileModal" class="modal-overlay" onclick="this.style.display='none'">
<div class="modal-content" onclick="event.stopPropagation()">
<h2 id="pName"></h2>
<div id="pMeta"></div>
<div id="pPoints"></div>
<div class="tiers-container" id="pTiers"></div>
</div>
</div>
<script>
const FULL_DEV={MK:"Mouse & Keyboard",MB:"Mobile",TP:"Trackpad",CT:"Controller"};
const PTS={HT1:50,LT1:40,HT2:30,LT2:20,HT3:12,LT3:8,HT4:5,LT4:3,HT5:2,LT5:1};
const KIT_MAP={"Overall":"backgroundsword.png","Emerald":"emerald.png","Dragonhide KB":"dragonhide.png","Emerald OA":"emerald.png","Dragonhide KB OA":"dragonhide.png","Wand":"wand.png","Emerald KB":"emerald.png","Diamond":"diamond.png"};
let DATA={};
async function load(){
  const r=await fetch("rankings.json?t="+Date.now());
  DATA=await r.json();
  processPoints(); buildKitBar(); render("Overall");
}
function processPoints(){
  let totals={};
  for(let kit in DATA){
    if(kit==="Players") continue;
    for(let tier in DATA[kit]){
      if(tier.startsWith("R")) continue;
      (DATA[kit][tier]||[]).forEach(p=>totals[p]=(totals[p]||0)+(PTS[tier]||0));
    }
  }
  DATA.Overall=totals;
}
function buildKitBar(){
  const bar=document.getElementById("kitBar"); bar.innerHTML="";
  Object.keys(KIT_MAP).forEach(k=>{
    const btn=document.createElement("button");
    btn.className="kit-btn "+(k==="Overall"?"active":"");
    btn.innerText=k;
    btn.onclick=()=>{document.querySelectorAll(".kit-btn").forEach(b=>b.classList.remove("active")); btn.classList.add("active"); render(k);};
    bar.appendChild(btn);
  });
}
function getPlayer(name){return DATA.Players.find(p=>p.name===name)||{region:"??",device:"??"};}
function getTags(name){
  const p=getPlayer(name);
  const rClass=p.region.toLowerCase()||"unknown";
  const dClass=p.device.toLowerCase()||"unknown";
  return `<span class="tag reg-${rClass}">${p.region}</span><span class="tag dev-${dClass}" onclick="alert('${FULL_DEV[p.device]||p.device}')">${p.device}</span>`;
}
function render(kit){
  const out=document.getElementById("displayList"); out.innerHTML="";
  if(kit==="Overall"){
    out.innerHTML='<div class="overall-table"></div>';
    const table=document.querySelector(".overall-table");
    Object.entries(DATA.Overall).sort((a,b)=>b[1]-a[1]).forEach(([n,pts],i)=>{
      let topKit=""; let topTier="";
      for(let k in DATA){ if(k==="Players"||k==="Overall") continue; for(let t in DATA[k]){ if(DATA[k][t].includes(n)){ topKit=k; topTier=t.replace("R",""); break; } } }
      let rankClass=""; if(i===0) rankClass="rank-1"; else if(i===1) rankClass="rank-2"; else if(i===2) rankClass="rank-3";
      const row=document.createElement("div");
      row.className="overall-row "+rankClass; row.onclick=()=>openProfile(n);
      row.innerHTML=`<div class="overall-rank">#${i+1}</div><img class="overall-kit-icon" src="${KIT_MAP[topKit]||'backgroundsword.png'}"><div class="overall-tier">${topTier||""}</div><div class="overall-name">${n}</div><div style="width:60px;text-align:right;color:#ffd700;font-weight:bold;">${pts} PTS</div>${getTags(n)}`;
      table.appendChild(row);
    });
    return;
  }
  // Horizontal tiers left to right
  const outGrid=document.createElement("div"); outGrid.className="horizontal-grid";
  ["T1","T2","T3","T4","T5"].forEach(level=>{
    let col=document.createElement("div"); col.style.display="flex"; col.style.flexDirection="column"; col.style.marginRight="12px";
    const label=document.createElement("div"); label.innerText=level; label.style.color="var(--purple)"; label.style.textAlign="center"; col.appendChild(label);
    for(let t in DATA[kit]){
      if(t.endsWith(level)){
        (DATA[kit][t]||[]).forEach(name=>{
          const retired=t.startsWith("R");
          const card=document.createElement("div"); card.className="tier-card "+(retired?'retired-card':''); card.onclick=()=>openProfile(name);
          card.innerHTML=`<div class="row"><span>${name} ${getTags(name)}</span><span class="tag">${t.replace("R","")}</span></div>`;
          col.appendChild(card);
        });
      }
    }
    outGrid.appendChild(col);
  });
  out.appendChild(outGrid);
}
function openProfile(name){
  const p=getPlayer(name);
  document.getElementById("pName").innerText=name;
  document.getElementById("pMeta").innerHTML=getTags(name);
  document.getElementById("pPoints").innerText=(DATA.Overall[name]||0)+" TOTAL PTS";
  const container=document.getElementById("pTiers"); container.innerHTML="";
  for(let kit in DATA){ if(kit==="Players"||kit==="Overall") continue;
    for(let t in DATA[kit]){ if((DATA[kit][t]||[]).includes(name)){
      const points=PTS[t.replace("R","")]||0; const retired=t.startsWith("R");
      const circle=document.createElement("div"); circle.className="tier-circle"; if(retired) circle.style.opacity="0.5";
      circle.title=`${kit}: ${points} pts`; circle.innerText=t.replace("R","");
      circle.onclick=()=>alert(`${kit}: ${points} PTS`);
      container.appendChild(circle);
    }}
  }
  document.getElementById("profileModal").style.display="flex";
}
load();
</script>
</body>
</html>
