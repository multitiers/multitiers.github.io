<!DOCTYPE html>
<html lang="en" translate="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTC TIERS</title>
<link rel="icon" type="image/png" href="backgroundsword.png">

<style>
@font-face { font-family: 'MultiCraftFont'; src: url('MultiCraftFont.ttf') format('truetype'); }

:root{
  --purple:#a855f7;
  --gold:#ffd700;
}

body{
  background:#000;
  color:#fff;
  font-family:'Courier New',monospace;
  margin:0;
  padding-bottom:40px;
}

/* ================== CARDS ================== */

.tier-card{
  border-radius:10px;
  padding:1.5px;
  margin:10px auto;
  max-width:850px;
  background:linear-gradient(90deg,transparent,var(--purple),transparent);
  background-size:200% 100%;
  animation:galaxySweep 4s linear infinite;
  cursor:pointer;
}

.card-inner{
  background:rgba(5,5,8,0.9);
  border-radius:9px;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 20px;
}

@keyframes galaxySweep{
  0%{background-position:200% 0;}
  100%{background-position:-200% 0;}
}

/* ================== METAL TOP 3 ================== */

.first-place,
.second-place,
.third-place{
  animation:none!important;
  background-size:300% 100%;
  animation:metalShine 3s linear infinite;
}

.first-place{
  background:linear-gradient(120deg,#b8860b 0%,#ffd700 25%,#ffffff 40%,#ffd700 55%,#b8860b 80%);
}

.second-place{
  background:linear-gradient(120deg,#7d7d7d 0%,#c0c0c0 25%,#ffffff 40%,#c0c0c0 55%,#7d7d7d 80%);
}

.third-place{
  background:linear-gradient(120deg,#8c5523 0%,#cd7f32 25%,#ffffff 40%,#cd7f32 55%,#8c5523 80%);
}

@keyframes metalShine{
  0%{background-position:-300% 0;}
  100%{background-position:300% 0;}
}

.first-place .card-inner,
.second-place .card-inner,
.third-place .card-inner{
  background:transparent!important;
  color:#000!important;
}

/* ================== ICON CIRCLE (OVERALL) ================== */

.overall-icon-circle{
  width:38px;
  height:38px;
  border-radius:50%;
  border:2px solid var(--purple);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  margin-right:10px;
}

/* ================== PROFILE ================== */

.profile-tiers{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:20px;
  margin-top:15px;
}

.tier-circle{
  width:65px;
  height:65px;
  border-radius:50%;
  border:3px solid var(--purple);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'MultiCraftFont';
  background:#111;
}
</style>
</head>
<body>

<div id="displayList"></div>

<script>
let DATA={};
const KITS=["Emerald","Dragonhide KB","Emerald OA","Dragonhide KB OA","Wand","Emerald KB","Diamond"];
const KIT_ICONS={
  "Emerald":"ðŸŸ¢",
  "Dragonhide KB":"ðŸ”´",
  "Emerald OA":"ðŸŸ¢",
  "Dragonhide KB OA":"ðŸ”´",
  "Wand":"ðŸª„",
  "Emerald KB":"ðŸŸ¢",
  "Diamond":"ðŸ’Ž"
};

async function load(){
  const r=await fetch(`https://raw.githubusercontent.com/multitiers/multitiers.github.io/refs/heads/main/rankings.json?t=${Date.now()}`);
  DATA=await r.json();
  processOverall();
  renderOverall();
}

function processOverall(){
  const PTS_MAP={ "HT1":50,"LT1":40,"HT2":30,"LT2":20,"HT3":12,"LT3":8,"HT4":5,"LT4":3,"HT5":2,"LT5":1 };
  let totals={};
  for(let k in DATA) if(k!=="Overall"&&k!=="Players"){
    for(let t in DATA[k]){
      const base=t.startsWith('R')?t.substring(1):t;
      DATA[k][t].forEach(p=>{
        totals[p]=(totals[p]||0)+(PTS_MAP[base]||0);
      });
    }
  }
  DATA["Overall"]=totals;
}

function getBestKit(name){
  const PTS_MAP={ "HT1":50,"LT1":40,"HT2":30,"LT2":20,"HT3":12,"LT3":8,"HT4":5,"LT4":3,"HT5":2,"LT5":1 };
  let bestKit=null;
  let bestVal=-1;
  for(let k of KITS){
    if(!DATA[k]) continue;
    for(let t in DATA[k]){
      if(DATA[k][t].includes(name)){
        const base=t.startsWith('R')?t.substring(1):t;
        const val=PTS_MAP[base]||0;
        if(val>bestVal){
          bestVal=val;
          bestKit=k;
        }
      }
    }
  }
  return bestKit;
}

function renderOverall(){
  const out=document.getElementById("displayList");
  out.innerHTML="";
  Object.entries(DATA["Overall"])
    .sort((a,b)=>b[1]-a[1])
    .forEach(([n,s],i)=>{

      let medal=i===0?"first-place":i===1?"second-place":i===2?"third-place":"";
      let bestKit=getBestKit(n);
      let icon=bestKit?KIT_ICONS[bestKit]:"";

      out.innerHTML+=`
      <div class="tier-card ${medal}" onclick="openProfile('${n}')">
        <div class="card-inner">
          <div class="row">
            <span><b>#${i+1}</b> ${n}</span>
            <div style="display:flex;align-items:center;">
              ${bestKit?`<div class="overall-icon-circle">${icon}</div>`:""}
              <b>${s} PTS</b>
            </div>
          </div>
        </div>
      </div>`;
    });
}

function openProfile(name){
  let html=`<div class="profile-tiers">`;
  for(let kit of KITS){
    let tierText="";
    if(DATA[kit]){
      for(let t in DATA[kit]){
        if(DATA[kit][t].includes(name)){
          tierText=t;
        }
      }
    }
    html+=`
      <div>
        <div style="text-align:center;margin-bottom:6px;">${KIT_ICONS[kit]}</div>
        <div class="tier-circle">${tierText||""}</div>
      </div>
    `;
  }
  html+=`</div>`;
  document.body.insertAdjacentHTML("beforeend",`
    <div style="position:fixed;inset:0;background:#000000dd;display:flex;align-items:center;justify-content:center;" onclick="this.remove()">
      <div style="background:#111;padding:25px;border:2px solid var(--purple);border-radius:15px;" onclick="event.stopPropagation()">
        <h2 style="margin:0 0 15px;">${name}</h2>
        ${html}
      </div>
    </div>
  `);
}

load();
</script>

</body>
</html>
