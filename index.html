<!DOCTYPE html>
<html lang="en" translate="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTC TIERS</title>
<link rel="icon" type="image/png" href="backgroundsword.png">
<meta property="og:title" content="MTC TIERS" />
<meta property="og:description" content="The MultiCraft PvP Tierlist." />
<meta property="og:image" content="https://multitiers.github.io/backgroundsword.png" />
<meta name="theme-color" content="#a855f7">
<meta name="twitter:card" content="summary_large_image">

<style>
@font-face { font-family: 'MultiCraftFont'; src: url('MultiCraftFont.ttf') format('truetype'); }
:root {
  --bg:#000;
  --purple:#a855f7;
  --gold:#ffd700;
  --red:#e74c3c;
  --blue:#3498db;
  --yellow:#f1c40f;
  --green:#2ecc71;
  --cyan:#00ffff;
  --sa:#00ff88;
}
* { font-family:'MultiCraftFont' !important; box-sizing:border-box; }
body { margin:0; background:var(--bg); color:#fff; overflow-x:hidden; }

.blob-layer{position:fixed; inset:0; z-index:-2;}
.blob{position:absolute; background:radial-gradient(circle at 30% 30%, #c084fc, #6b21a8); border-radius:50%; filter:blur(140px); opacity:0.35; animation:float 20s infinite alternate ease-in-out;}
.blob1{width:600px;height:600px;top:-20%;left:-20%;}
.blob2{width:500px;height:500px;bottom:-20%;right:-20%;animation-delay:-8s;}
@keyframes float{0%{transform:translate(0,0) scale(1);} 100%{transform:translate(200px,150px) scale(1.2);}}

.space-container{position:fixed; inset:0; z-index:-1; pointer-events:none;}
.floating-kit{position:absolute; width:30px; opacity:0.35; animation:drift linear infinite;}
@keyframes drift{from{transform:translate(0,0) rotate(0deg);} to{transform:translate(var(--tw),var(--th)) rotate(360deg);}}

nav{display:flex; justify-content:center; gap:40px; padding:20px; background:rgba(0,0,0,0.9); border-bottom:1px solid #222; position:sticky; top:0; z-index:500;}
.nav-link{opacity:0.6; cursor:pointer; transition:0.3s;}
.nav-link.active{opacity:1; text-shadow:0 0 10px var(--purple);}

header{text-align:center; padding:40px 0 20px;}
.main-title{font-size:3rem; letter-spacing:6px; text-shadow:0 0 15px var(--purple);}

#kitBar{display:flex; justify-content:center; flex-wrap:wrap; gap:12px; margin:20px 0;}
.kit-btn{background:#111; border:1px solid #333; padding:8px 16px; border-radius:6px; cursor:pointer; transition:0.2s;}
.kit-btn.active{border-color:var(--purple); box-shadow:0 0 12px rgba(168,85,247,0.4);}

.horizontal-grid{display:flex; gap:25px; padding:25px; overflow-x:auto;}
.tier-column{min-width:280px;}
.tier-label{text-align:center; color:var(--purple); margin-bottom:15px; font-size:1.2rem;}

.tier-card{background:#080808; border:1px solid #222; border-radius:10px; margin-bottom:10px; transition:0.25s; cursor:pointer;}
.tier-card:hover{border-color:var(--purple); transform:translateY(-4px); box-shadow:0 0 20px rgba(168,85,247,0.35);}
.retired-card{opacity:0.4; border-style:dashed;}
.row{padding:12px 16px; display:flex; justify-content:space-between; align-items:center;}

.tag{font-size:0.6rem; padding:2px 6px; border:1px solid #444; border-radius:4px; margin-left:6px; cursor:pointer;}
.reg-na{color:var(--red); border-color:var(--red);}
.reg-eu{color:var(--blue); border-color:var(--blue);}
.reg-as{color:var(--yellow); border-color:var(--yellow);}
.reg-sa{color:var(--sa); border-color:var(--sa);}
.dev-mk{color:var(--cyan); border-color:var(--cyan);}
.dev-mb{color:var(--green); border-color:var(--green);}
.dev-tp{color:#fff; border-color:#fff;}
.dev-ct{color:#f1c40f; border-color:var(--f1c40f);}

.modal-overlay{position:fixed; inset:0; background:rgba(0,0,0,0.95); display:none; align-items:center; justify-content:center;}
.modal-content{background:#000; border:1.5px solid var(--purple); padding:30px; border-radius:12px; width:400px; text-align:center;}

.tiers-container{display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin-top:15px;}
.tier-circle{width:50px; height:50px; border:2px solid var(--purple); border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:0.2s; font-size:0.8rem; color:#fff;}
.tier-circle:hover{background:rgba(168,85,247,0.2); transform:scale(1.1);}
</style>
</head>
<body>

<div class="blob-layer"><div class="blob blob1"></div><div class="blob blob2"></div></div>
<div class="space-container" id="spaceContainer"></div>

<nav>
<div id="nav-rankings" class="nav-link active">RANKINGS</div>
</nav>

<header><h1 class="main-title">MTC TIERS</h1></header>

<div id="view-name" style="text-align:center;color:var(--gold);margin-bottom:15px;">OVERALL</div>
<div id="kitBar"></div>
<div id="displayList"></div>

<div id="profileModal" class="modal-overlay" onclick="this.style.display='none'">
<div class="modal-content" onclick="event.stopPropagation()">
<h2 id="pName" style="color:var(--purple)"></h2>
<div id="pMeta"></div>
<div id="pPoints" style="color:var(--gold);margin:15px 0;"></div>
<div class="tiers-container" id="pTiers"></div>
</div>
</div>

<script>
const FULL_DEV={MK:"Mouse & Keyboard",MB:"Mobile",TP:"Trackpad",CT:"Controller"};
const PTS={HT1:50,LT1:40,HT2:30,LT2:20,HT3:12,LT3:8,HT4:5,LT4:3,HT5:2,LT5:1};
let DATA={};

// Load data
async function load(){
  const r=await fetch("rankings.json?t="+Date.now());
  DATA=await r.json();
  processPoints(); buildKitBar(); initSpace(); render("Overall");
}

// Calculate points
function processPoints(){
  let totals={};
  for(let kit in DATA){
    if(kit==="Players") continue;
    for(let tier in DATA[kit]){
      if(tier.startsWith("R")) continue;
      (DATA[kit][tier]||[]).forEach(p=>totals[p]=(totals[p]||0)+(PTS[tier]||0));
    }
  }
  DATA.Overall=totals;
}

// Kit bar
function buildKitBar(){
  const bar=document.getElementById("kitBar");
  bar.innerHTML="";
  Object.keys(DATA).forEach(k=>{
    if(k==="Players") return;
    const btn=document.createElement("button");
    btn.className="kit-btn";
    btn.innerText=k;
    btn.onclick=()=>{document.querySelectorAll(".kit-btn").forEach(b=>b.classList.remove("active")); btn.classList.add("active"); document.getElementById("view-name").innerText=k.toUpperCase(); render(k);};
    if(k==="Overall") btn.classList.add("active");
    bar.appendChild(btn);
  });
}

// Player helper
function getPlayer(name){return DATA.Players.find(p=>p.name===name)||{region:"??",device:"??"};}

// Clickable tags
function getTags(name){
  const p=getPlayer(name);
  const rClass="reg-"+p.region.toLowerCase();
  const dClass="dev-"+p.device.toLowerCase();
  const fullDevice=FULL_DEV[p.device]||p.device;
  return `<span class="tag ${rClass}">${p.region}</span>
          <span class="tag ${dClass}" onclick="alert('${fullDevice}')">${p.device}</span>`;
}

// Render rankings
function render(kit){
  const out=document.getElementById("displayList");
  out.innerHTML="";
  if(kit==="Overall"){
    Object.entries(DATA.Overall).sort((a,b)=>b[1]-a[1]).forEach(([n,pts],i)=>{
      out.innerHTML+=`<div class="tier-card" style="max-width:600px;margin:10px auto;" onclick="openProfile('${n}')">
        <div class="row"><span><b style="color:var(--purple);margin-right:10px;">#${i+1}</b>${n} ${getTags(n)}</span><b style="color:var(--gold)">${pts} PTS</b></div></div>`;
    }); return;
  }
  out.className="horizontal-grid";
  ["T1","T2","T3","T4","T5"].forEach(level=>{
    let col=`<div class="tier-column"><div class="tier-label">${level}</div>`;
    let found=false;
    for(let tier in DATA[kit]){
      if(tier.endsWith(level)){
        const retired=tier.startsWith("R");
        (DATA[kit][tier]||[]).forEach(name=>{
          found=true;
          col+=`<div class="tier-card ${retired?'retired-card':''}" onclick="openProfile('${name}')">
                  <div class="row"><span>${name} ${getTags(name)}</span>
                  <span class="tag">${tier.replace("R","")}</span></div></div>`;
        });
      }
    }
    if(found) out.innerHTML+=col+"</div>";
  });
}

// Open profile modal
function openProfile(name){
  const p=getPlayer(name);
  document.getElementById("pName").innerText=name;
  document.getElementById("pMeta").innerHTML=`${getTags(name)} <div style="margin-top:6px;font-size:0.85rem;opacity:0.85;">${FULL_DEV[p.device]||p.device}</div>`;
  document.getElementById("pPoints").innerText=(DATA.Overall[name]||0)+" TOTAL PTS";

  const container=document.getElementById("pTiers");
  container.innerHTML="";
  for(let kit in DATA){
    if(kit==="Players"||kit==="Overall") continue;
    for(let t in DATA[kit]){
      if((DATA[kit][t]||[]).includes(name)){
        const points=PTS[t.replace("R","")]||0;
        const retired=t.startsWith("R");
        const circle=document.createElement("div");
        circle.className="tier-circle";
        if(retired) circle.style.opacity="0.5";
        circle.title=`${kit}: ${points} pts`;
        circle.innerText=t.replace("R","");
        circle.onclick=()=>{alert(`${kit}: ${points} PTS`);};
        container.appendChild(circle);
      }
    }
  }
  document.getElementById("profileModal").style.display="flex";
}

// Floating kits
function initSpace(){
  const sc=document.getElementById("spaceContainer");
  const COUNT=window.innerWidth<768?12:18;
  for(let i=0;i<COUNT;i++){
    const img=document.createElement("img");
    img.src="backgroundsword.png";
    img.className="floating-kit";
    img.style.left=Math.random()*100+"%";
    img.style.top=Math.random()*100+"%";
    img.style.setProperty('--tw',(Math.random()*400-200)+'vw');
    img.style.setProperty('--th',(Math.random()*400-200)+'vh');
    img.style.animationDuration=(20+Math.random()*20)+'s';
    sc.appendChild(img);
  }
}

load();
</script>

</body>
</html>
