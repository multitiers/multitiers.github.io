<!DOCTYPE html>
<html lang="en" translate="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MultiTiers</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/multitiers/multitiers.github.io/refs/heads/main/emerald.png">
  <style>
    @font-face { font-family: 'MultiCraftFont'; src: url('MultiCraftFont.ttf') format('truetype'); }
    
    :root {
      --bg: #030406; --bg-panel: rgba(15, 10, 25, 0.98);
      --purple: #a855f7; --white: #ffffff;
      --gold: #ffd700; 
      --t1: #ff4d4d; --t2: #ffa64d; --t3: #ffff4d; --t4: #4dff4d; --t5: #4dffff;
      --border: #2a1e3a;
      --gradient: linear-gradient(135deg, #a855f7 0%, #ffffff 100%);
    }

    body { 
      background: var(--bg); color: #fff; font-family: 'Courier New', monospace; margin: 0; padding-bottom: 50px;
      background-image: radial-gradient(circle at 50% -10%, rgba(168, 85, 247, 0.15) 0%, transparent 70%);
      background-attachment: fixed; overflow: hidden;
    }

    /* --- SPACE ENGINE: TRAVELING & SPINNING STARS --- */
    #space-container { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
    
    .space-star {
      position: absolute; width: 35px; height: 35px; background-size: contain;
      background-repeat: no-repeat;
      filter: drop-shadow(0 0 10px var(--purple));
      /* Animation: Move from Right to Left + Spin + Pulse */
      animation: travel 25s linear infinite, spin 4s linear infinite, glowPulse 3s ease-in-out infinite alternate;
    }

    @keyframes travel {
      from { left: 110vw; }
      to { left: -10vw; }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes glowPulse {
      from { filter: drop-shadow(0 0 5px var(--purple)); opacity: 0.6; }
      to { filter: drop-shadow(0 0 15px #fff); opacity: 1; }
    }

    /* Rest of UI */
    .header-content { display: flex; align-items: center; justify-content: center; padding: 60px 0 30px; }
    .main-title { 
      font-family: 'MultiCraftFont', sans-serif; font-size: 3.2rem; margin: 0; letter-spacing: 4px;
      background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.5));
    }

    /* Social Bar */
    .social-bar { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
    .btn-ext { 
      padding: 10px 20px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer;
      text-decoration: none; border: 1px solid var(--border); color: #fff; transition: 0.3s;
    }
    .btn-discord { background: #5865F2; }
    .btn-server { background: #333; }

    /* Kit Stars (Selection) */
    .kit-star { 
      background: #0a0c12; border: 1px solid var(--border); width: 55px; height: 55px; 
      border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; 
      transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative;
    }
    .kit-star img { width: 28px; height: 28px; filter: grayscale(1); }
    .kit-star.active { 
      border-color: #fff; transform: scale(1.2); 
      box-shadow: 0 0 25px var(--purple), 0 0 10px #fff;
    }
    .kit-star.active img { filter: grayscale(0); }

    /* Rankings Cards */
    .tier-card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 14px; margin-bottom: 15px; animation: slideIn 0.5s ease-out; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .row { display: flex; justify-content: space-between; align-items: center; padding: 18px 25px; cursor: pointer; }

    /* Profile Glow */
    .modal-content { 
      background: #050608; border: 2px solid var(--purple); border-radius: 20px; width: 90%; max-width: 420px; padding: 40px; text-align: center;
      box-shadow: 0 0 30px var(--purple); animation: modalGlow 2s infinite alternate;
    }
    @keyframes modalGlow { from { box-shadow: 0 0 20px var(--purple); } to { box-shadow: 0 0 50px var(--purple), 0 0 20px #fff; } }
    
    .color-T1 { color: var(--t1); text-shadow: 0 0 5px var(--t1); }
    .gold-text { color: var(--gold); }
  </style>
</head>
<body>

<div id="space-container"></div>

<header>
  <div class="header-content">
    <h1 class="main-title">MULTI TIERS</h1>
  </div>
</header>

<div class="container" style="max-width: 850px; margin: auto; padding: 0 20px;">
  <div class="social-bar">
    <a href="https://discord.gg/YOUR_LINK" class="btn-ext btn-discord">DISCORD</a>
    <a href="minecraft://YOUR_IP" class="btn-ext btn-server">SERVER IP</a>
  </div>

  <div id="kitBar" style="display: flex; justify-content: center; gap: 20px; margin-bottom: 40px;"></div>
  <div id="displayList"></div>
</div>

<div id="profileModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); z-index:1000; align-items:center; justify-content:center; backdrop-filter:blur(8px);">
  <div class="modal-content">
    <span onclick="closeProfile()" style="position:absolute; top:15px; right:20px; cursor:pointer; font-size:30px;">&times;</span>
    <div id="pRank" style="font-size: 0.7rem; color: #888; margin-bottom: 10px;">RANK #--</div>
    <h2 id="pName" style="font-size: 2.2rem; margin:0; font-family:'MultiCraftFont'; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Player</h2>
    <div id="pPoints" class="gold-text" style="font-weight:bold; margin: 15px 0 25px;">0 TOTAL PTS</div>
    <div id="pGrids" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;"></div>
  </div>
</div>

<script>
let DATA = {};
const ICONS = { "Overall": "https://raw.githubusercontent.com/multitiers/multitiers.github.io/refs/heads/main/emerald.png", "Emerald": "emerald.png", "Dragonhide KB": "dragonhide_kb.png", "Emerald OA": "emerald_oa.png", "Dragonhide KB OA": "kb_oa.png", "Wand": "wand.png" };

async function load() {
  const r = await fetch(`https://raw.githubusercontent.com/multitiers/multitiers.github.io/refs/heads/main/rankings.json`);
  DATA = await r.json();
  processOverall();
  buildKitStars();
  spawnSpaceStars();
  render("Overall");
}

function processOverall() {
  const pts = {"HT1":10,"LT1":9,"HT2":8,"LT2":7,"HT3":6,"LT3":5,"HT4":4,"LT4":3,"HT5":2,"LT5":1};
  let totals = {};
  for(let k in DATA) {
    if(k==="Overall") continue;
    for(let t in DATA[k]) {
      if(Array.isArray(DATA[k][t])) DATA[k][t].forEach(p => totals[p] = (totals[p]||0) + (pts[t]||0));
    }
  }
  DATA["Overall"] = totals;
}

function spawnSpaceStars() {
  const container = document.getElementById('space-container');
  const imgs = Object.values(ICONS);
  for(let i=0; i<15; i++) {
    const star = document.createElement('div');
    star.className = 'space-star';
    star.style.backgroundImage = `url(${imgs[i % imgs.length]})`;
    star.style.top = Math.random() * 100 + 'vh';
    // Randomize speed and delay so they don't move as a block
    star.style.animationDuration = (20 + Math.random() * 20) + 's, ' + (3 + Math.random() * 3) + 's, 3s';
    star.style.animationDelay = (Math.random() * -20) + 's';
    container.appendChild(star);
  }
}

function buildKitStars() {
  const bar = document.getElementById('kitBar');
  Object.keys(DATA).forEach(k => {
    const s = document.createElement('div');
    s.className = `kit-star ${k==='Overall'?'active':''}`;
    s.innerHTML = `<img src="${ICONS[k] || ICONS['Overall']}">`;
    s.onclick = () => {
      document.querySelectorAll('.kit-star').forEach(x => x.classList.remove('active'));
      s.classList.add('active');
      render(k);
    };
    bar.appendChild(s);
  });
}

function render(kit) {
  const out = document.getElementById('displayList');
  out.innerHTML = "";
  if(kit === "Overall") {
    let sorted = Object.entries(DATA["Overall"]).sort((a,b) => b[1]-a[1]);
    sorted.forEach(([n, s], i) => {
      out.innerHTML += `<div class="tier-card"><div class="row" onclick="openProfile('${n}')"><span><b style="color:#5a6474; margin-right:15px;">#${i+1}</b> ${n}</span><span class="gold-text">${s} PTS</span></div></div>`;
    });
  } else {
    ["T1","T2","T3","T4","T5"].forEach(t => {
      let players = [];
      for(let sub in DATA[kit]) if(sub.includes(t)) DATA[kit][sub].forEach(n => players.push({n, sub}));
      if(players.length) {
        let h = `<div class="tier-card"><div class="row" style="background:rgba(255,255,255,0.02); cursor:default;"><b class="color-${t}">${t}</b></div>`;
        players.forEach(p => h += `<div class="row" onclick="openProfile('${p.n}')"><b>${p.n}</b> <span class="color-${t}" style="font-size:0.75rem;">${p.sub}</span></div>`);
        out.innerHTML += h + `</div>`;
      }
    });
  }
}

function openProfile(name) {
  let sorted = Object.entries(DATA["Overall"]).sort((a,b) => b[1]-a[1]);
  let r = sorted.findIndex(x => x[0] === name) + 1;
  document.getElementById('pRank').textContent = `RANK #${r || '--'}`;
  document.getElementById('pName').textContent = name;
  document.getElementById('pPoints').textContent = (DATA["Overall"][name] || 0) + " TOTAL PTS";
  const grid = document.getElementById('pGrids'); grid.innerHTML = "";
  for(let k in ICONS) {
    if(k==="Overall") continue;
    for(let t in DATA[k]) if(DATA[k][t].includes(name)) {
      grid.innerHTML += `<div style="background:#0a0c12; padding:10px; border-radius:10px; border:1px solid var(--border);"><img src="${ICONS[k]}" style="width:20px;"><br><span style="font-size:10px; color:var(--gold);">${t}</span></div>`;
    }
  }
  document.getElementById('profileModal').style.display = 'flex';
}

function closeProfile() { document.getElementById('profileModal').style.display = 'none'; }
load();
</script>
</body>
</html>
